webpackJsonp([1],{"+FfD":function(e,t){},"21or":function(e,t){},AmIl:function(e,t){},Dlmr:function(e,t){},E8dG:function(e,t){},HLd3:function(e,t){},HN0y:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7+uW"),i=a("zL8q"),s=a.n(i),o=(a("tvR6"),a("//Fk")),n=a.n(o),l=a("mtWM"),c=a.n(l),u=a("NYxO"),m=a("lbHh"),d=a.n(m),p="sessionId";r.default.use(u.a);var f={sessionId:d.a.get(p),isLogin:!1,isAdmin:!1,isLogOut:!1,nickName:"",menuList:null},h={SetHrmTabs:function(e,t,a){},SetSessionTemp:function(e,t){e.sessionId=t,e.isLogOut=!1},SetSession:function(e,t){e.sessionId=t,function(e){d.a.set(p,e,{expires:7})}(t),e.isLogOut=!1},LogOut:function(e){e.sessionId=null,e.isLogOut=!0,d.a.remove(p)},SetUserInfo:function(e,t){1==t.type?(e.isAdmin=!0,e.menuList=[{name:"用户管理",icon:"el-icon-user",subMenu:[{name:"用户查询",router:"/user"},{name:"添加用户",router:"/useredit"}]},{name:"部门管理",icon:"el-icon-menu",subMenu:[{name:"部门查询",router:"/department"},{name:"添加部门",router:"/departmentedit"}]},{name:"职位管理",icon:"el-icon-news",subMenu:[{name:"职位查询",router:"/position"},{name:"添加职位",router:"/positionedit"}]},{name:"员工管理",icon:"el-icon-service",subMenu:[{name:"员工查询",router:"/staff"},{name:"添加员工",router:"/staffedit"}]},{name:"公告管理",icon:"el-icon-message",subMenu:[{name:"公告查询",router:"/bulletin"},{name:"添加公告",router:"/bulletinedit"}]},{name:"下载中心",icon:"el-icon-tickets",subMenu:[{name:"文档查询",router:"/file"},{name:"上传文档",router:"/fileedit"}]}]):(e.isAdmin=!1,e.menuList=[{name:"用户管理",icon:"el-icon-user",subMenu:[{name:"用户查询",router:"/user"}]},{name:"部门管理",icon:"el-icon-menu",subMenu:[{name:"部门查询",router:"/department"}]},{name:"职位管理",icon:"el-icon-news",subMenu:[{name:"职位查询",router:"/position"}]},{name:"员工管理",icon:"el-icon-service",subMenu:[{name:"员工查询",router:"/staff"}]},{name:"公告管理",icon:"el-icon-message",subMenu:[{name:"公告查询",router:"/bulletin"}]},{name:"下载中心",icon:"el-icon-tickets",subMenu:[{name:"文档查询",router:"/file"}]}]),e.nickName=t.nickName}},g=new u.a.Store({state:f,getters:{GetIsAdmin:function(e){return e.isAdmin}},mutations:h,actions:{}}),b=c.a.create({baseURL:"http://127.0.0.1:2333"});b.interceptors.request.use(function(e){return g.state.sessionId&&(e.headers["X-SessionId"]=g.state.sessionId),e},function(e){return console.log(e),n.a.reject(e)}),b.interceptors.response.use(function(e){return 200==e.status?e.data:new n.a.reject(e)},function(e){return console.log(e),new n.a.reject(e)});var v=b,F=a("NC6I"),_=a.n(F);function y(){return v({method:"get",url:"/api/account"})}var k={name:"HrmHeader",data:function(){var e=this;return{nickName:this.$store.state.nickName,passwordFormVisible:!1,passwordForm:{oldPassword:"",newPassword:"",newPassword2:""},passwordRules:{oldPassword:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"}],newPassword2:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:function(t,a,r){a!==e.passwordForm.newPassword?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}]}}},methods:{AlterPassword:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.passwordForm,a={oldPassword:_()(a.oldPassword),newPassword:_()(a.newPassword),newPassword2:_()(a.newPassword2)},v({method:"put",url:"/api/account",data:a})).then(function(e){"ok"==e.status?(t.$message({message:"修改成功",type:"success"}),t.passwordFormVisible=!1):t.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})})},LogOut:function(){this.$store.commit("LogOut"),this.$router.push({path:"/login"})},FaceRegister:function(){this.$router.push({path:"/filetest"})}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",[a("p",{staticStyle:{"font-size":"20px","font-weight":"bold"}},[e._v("CSI员工之家")])]),e._v(" "),a("el-col",[a("p",[e._v("欢迎使用: "+e._s(e.nickName))])]),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"}},[a("el-dropdown",{attrs:{trigger:"click"}},[a("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:"https://i2.hdslb.com/bfs/face/eb700365433f923cd3f73666873a95e2cbfc0d08.jpg@72w_72h.webp",fit:"cover"}}),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){e.passwordFormVisible=!0}}},[e._v("修改密码")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(t){return e.FaceRegister(t)}}},[e._v("人脸注册")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(t){return e.LogOut()}}},[e._v("退出登录")])],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改密码",visible:e.passwordFormVisible},on:{"update:visible":function(t){e.passwordFormVisible=t}}},[a("el-form",{ref:"passwordForm",attrs:{"label-width":"150px",model:e.passwordForm,rules:e.passwordRules}},[a("el-form-item",{attrs:{label:"旧密码",prop:"oldPassword"}},[a("el-input",{staticStyle:{"max-width":"300px"},model:{value:e.passwordForm.oldPassword,callback:function(t){e.$set(e.passwordForm,"oldPassword",t)},expression:"passwordForm.oldPassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[a("el-input",{staticStyle:{"max-width":"300px"},model:{value:e.passwordForm.newPassword,callback:function(t){e.$set(e.passwordForm,"newPassword",t)},expression:"passwordForm.newPassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码",prop:"newPassword2"}},[a("el-input",{staticStyle:{"max-width":"300px"},model:{value:e.passwordForm.newPassword2,callback:function(t){e.$set(e.passwordForm,"newPassword2",t)},expression:"passwordForm.newPassword2"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.passwordFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.AlterPassword("passwordForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var w=a("VU/8")(k,x,!1,function(e){a("niX4")},"data-v-473a6811",null).exports,S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-menu",e._l(e.menuList,function(t,r){return a("el-submenu",{key:r,attrs:{index:r.toString()}},[a("template",{slot:"title"},[a("i",{class:t.icon}),e._v(" "),a("span",[e._v(e._s(t.name))])]),e._v(" "),a("el-menu-item-group",e._l(t.subMenu,function(t,i){return a("el-menu-item",{key:i,attrs:{index:r.toString()+"-"+i.toString()},on:{click:function(a){return e.RouterGo(t.router)}}},[e._v(e._s(t.name))])}),1)],2)}),1)],1)},staticRenderFns:[]};var $=a("VU/8")({name:"HrmAside",data:function(){return{menuList:this.$store.state.menuList}},methods:{RouterGo:function(e){this.$router.push({path:e})}}},S,!1,function(e){a("21or")},"data-v-b2027e92",null).exports,P={name:"HrmTabs",data:function(){return{editableTabsValue:this.$store.state.hrmTabsValue,editableTabs:this.$store.state.hrmTabs,tabIndex:1}},methods:{addTab:function(e){this.$store.commit("SetTabs")},removeTab:function(e){var t=this.editableTabs,a=this.editableTabsValue;a===e&&t.forEach(function(r,i){if(r.name===e){var s=t[i+1]||t[i-1];s&&(a=s.name)}}),this.editableTabsValue=a,this.editableTabs=t.filter(function(t){return t.name!==e})},ClickTab:function(e){console.log(e.name)}},computed:{listenstage:function(){return this.$store.state.hrmTabsValue}}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{attrs:{type:"card",closable:""},on:{"tab-click":e.ClickTab,"tab-remove":e.removeTab},model:{value:e.listenstage,callback:function(t){e.listenstage=t},expression:"listenstage"}},e._l(e.editableTabs,function(e,t){return a("el-tab-pane",{key:e.name,attrs:{label:e.title,name:e.name}})}),1)],1)},staticRenderFns:[]};var C={name:"App",components:{HrmTabs:a("VU/8")(P,D,!1,function(e){a("Rtck")},"data-v-be4238c8",null).exports,HrmAside:$,HrmHeader:w},data:function(){return{isLogin:!1}},mounted:function(){var e=this;e.$store.state.sessionId?y().then(function(t){"ok"==t.status?(console.log(t.data),e.$store.commit("SetUserInfo",t.data),e.isLogin=!0,e.$router.push({path:"/user"})):e.$router.push({path:"/login"})}).catch(function(e){console.log(e)}):e.$router.push({path:"/login"})},updated:function(){var e=this;e.$store.state.sessionId&&!e.isLogin?y().then(function(t){"ok"==t.status?(console.log(t.data),e.$store.commit("SetUserInfo",t.data),e.isLogin=!0,e.$router.push({path:"/user"})):e.$router.push({path:"/login"})}).catch(function(e){console.log(e)}):console.log("i don't know do what"),e.$store.state.isLogOut&&(e.isLogin=!1)}},U={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.isLogin?t("div",[t("el-container",[t("el-header",[t("HrmHeader")],1),this._v(" "),t("el-container",[t("el-aside",{staticStyle:{"max-width":"200px"}},[t("HrmAside")],1),this._v(" "),t("el-main",[t("router-view")],1)],1)],1)],1):t("div",[t("router-view")],1)])},staticRenderFns:[]};var T=a("VU/8")(C,U,!1,function(e){a("E8dG")},null,null).exports,z=a("/ocq"),q={name:"HrmLogin",data:function(){return{loginForm:{account:"sss",password:"aaa"},loginRules:{account:[{required:!0,message:"请输入账户名",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}]},isAutoLogin:!0}},methods:{LoginClick:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.loginForm,v({method:"get",url:"/api/login",params:{account:a.account,password:_()(a.password)}})).then(function(e){"ok"==e.status?(t.isAutoLogin?t.$store.commit("SetSession",e.data):t.$store.commit("SetSessionTemp",e.data),t.$router.push({path:"/user"})):t.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})})}}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{staticStyle:{width:"400px","margin-top":"50px"}},[a("el-card",[a("div",{staticStyle:{"text-align":"center"}},[a("h1",[e._v("CSI 员工之家")])]),e._v(" "),a("el-form",{ref:"loginForm",staticStyle:{margin:"20px"},attrs:{model:e.loginForm,rules:e.loginRules}},[a("el-form-item",{attrs:{prop:"account"}},[a("el-input",{attrs:{placeholder:"account"},model:{value:e.loginForm.account,callback:function(t){e.$set(e.loginForm,"account",t)},expression:"loginForm.account"}},[a("i",{staticClass:"el-input__icon el-icon-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[a("i",{staticClass:"el-input__icon el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),a("el-checkbox",{model:{value:e.isAutoLogin,callback:function(t){e.isAutoLogin=t},expression:"isAutoLogin"}},[e._v("自动登录")]),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.LoginClick("loginForm")}}},[e._v("登录")])],1),e._v(" "),a("el-col",[a("el-button",{attrs:{type:"primary",disabled:""}},[e._v("人脸登录")])],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("router-link",{staticStyle:{"font-size":"10px",color:"dodgerblue"},attrs:{to:"/register"}},[e._v("没有账号？点击注册")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var V=a("VU/8")(q,R,!1,function(e){a("HLd3")},"data-v-2442629e",null).exports,E={name:"HrmRegister",data:function(){return{registerForm:{account:"",password:"",nickName:""},registerRules:{account:[{required:!0,message:"请输入账户名",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],nickName:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}]}}},methods:{RegisterClick:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.registerForm,a={account:a.account,password:_()(a.password),nickName:a.nickName},v({method:"post",url:"/api/account",data:a})).then(function(e){"ok"==e.status?(t.$message({message:"注册成功",type:"success"}),t.$router.push({path:"/login"})):t.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})})}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{staticStyle:{width:"400px","margin-top":"50px"}},[a("el-card",[a("div",{staticStyle:{"text-align":"center"}},[a("h1",[e._v("注册用户")])]),e._v(" "),a("el-form",{ref:"registerForm",staticStyle:{margin:"20px"},attrs:{model:e.registerForm,rules:e.registerRules}},[a("el-form-item",{attrs:{prop:"account"}},[a("el-input",{attrs:{placeholder:"account"},model:{value:e.registerForm.account,callback:function(t){e.$set(e.registerForm,"account",t)},expression:"registerForm.account"}},[a("i",{staticClass:"el-input__icon el-icon-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{placeholder:"password"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}},[a("i",{staticClass:"el-input__icon el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),a("el-form-item",{attrs:{prop:"nickName"}},[a("el-input",{attrs:{placeholder:"nick name"},model:{value:e.registerForm.nickName,callback:function(t){e.$set(e.registerForm,"nickName",t)},expression:"registerForm.nickName"}},[a("i",{staticClass:"el-input__icon el-icon-tickets",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.RegisterClick("registerForm")}}},[e._v("注册")])],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var L=a("VU/8")(E,A,!1,function(e){a("Dlmr")},"data-v-a9652d4a",null).exports;var B={name:"HrmUser",data:function(){return{isAdmin:this.$store.state.isAdmin,userForm:{account:"",status:"0",options:[{value:"0",label:"全部"},{value:"1",label:"管理员"},{value:"2",label:"普通用户"}]},isSearch:!1,userTable:null,multipleSelection:[],totalPage:0,currentPage:1,currentPageSize:5,deleteButtonDisable:!0,editFormVisible:!1,editForm:{userId:"",account:"",nickName:"",type:"",options:[{value:"1",label:"管理员"},{value:"2",label:"普通用户"}]},editRules:{account:[{required:!0,message:"请输入账户名称",trigger:"blur"}],nickName:[{required:!0,message:"请输入用户昵称",trigger:"blur"}],type:[{required:!0,message:"请选择用户类型",trigger:"change"}]}}},methods:{UpdateTableData:function(){var e,t=this,a=void 0;a=t.isSearch?{offset:this.currentPageSize*(this.currentPage-1),limit:this.currentPageSize,searchText:this.userForm.account,type:this.userForm.status}:{offset:this.currentPageSize*(this.currentPage-1),limit:this.currentPageSize},(e=a,v({method:"get",url:"/api/user",params:{offset:e.offset,limit:e.limit,searchText:e.searchText,type:e.type}})).then(function(e){"ok"==e.status?e.data.users.length?(t.userTable=e.data.users,t.totalPage=e.data.total):t.$message({message:"暂无匹配数据",type:"info"}):t.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})},handleEdit:function(e,t){this.editForm.account=t.account,this.editForm.nickName=t.nickName,this.editForm.userId=t.id,this.editForm.type=null,this.editFormVisible=!0},handleSizeChange:function(e){this.currentPageSize=e,this.currentPage=1,this.UpdateTableData()},handleCurrentChange:function(e){this.currentPage=e,this.UpdateTableData()},handleSelectionChange:function(e){this.multipleSelection=e,0==this.multipleSelection.length?this.deleteButtonDisable=!0:this.deleteButtonDisable=!1},SearchButtonClick:function(){this.userForm.account?(this.isSearch=!0,this.currentPage=1,this.UpdateTableData()):(this.isSearch=!1,this.currentPage=1,this.UpdateTableData())},EditUser:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.editForm,a={account:a.account,nickName:a.nickName,type:a.type,userId:a.userId},v({method:"put",url:"/api/user",data:a})).then(function(e){"ok"==e.status?(t.$message({message:"修改成功",type:"success"}),t.UpdateTableData(),t.editFormVisible=!1):t.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})})},DeleteUserClick:function(){for(var e=this,t=new Array,a=0;a<this.multipleSelection.length;a++)t[a]=this.multipleSelection[a].id;e.$alert("是否删除选中的条目","删除提示",{confirmButtonText:"确定",callback:function(a){var r;"confirm"==a&&(r=t,v({method:"delete",url:"/api/user",data:r})).then(function(t){"ok"==t.status?(e.$message({message:"删除成功",type:"success"}),e.UpdateTableData()):e.$message({message:t.data,type:"error"})}).catch(function(e){console.log(e)})}})}},mounted:function(){this.UpdateTableData()},updated:function(){console.log(this.$store.state.isAdmin),this.isAdmin=this.$store.state.isAdmin}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.userForm}},[a("el-form-item",{attrs:{label:"搜索内容"}},[a("el-input",{attrs:{placeholder:"请输入搜索内容"},model:{value:e.userForm.account,callback:function(t){e.$set(e.userForm,"account",t)},expression:"userForm.account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户类型"}},[a("el-select",{attrs:{placeholder:"请选择用户类型"},model:{value:e.userForm.status,callback:function(t){e.$set(e.userForm,"status",t)},expression:"userForm.status"}},e._l(e.userForm.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.SearchButtonClick}},[e._v("搜索")]),e._v(" "),e.isAdmin?a("el-button",{attrs:{type:"danger",disabled:e.deleteButtonDisable},on:{click:function(t){return e.DeleteUserClick()}}},[e._v("删除选中项")]):e._e()],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.userTable,height:"400px"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"ID",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"登录名",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.account))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"密码",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.password))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"用户名",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.nickName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"账户类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.type?a("el-tag",{attrs:{size:"medium"}},[e._v("普通用户")]):e._e(),e._v(" "),1==t.row.type?a("el-tag",{attrs:{size:"medium"}},[e._v("管理员")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",[e._v(e._s(t.row.createDate))])]}}])}),e._v(" "),e.isAdmin?a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")])]}}],null,!1,4140675729)}):e._e()],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:20}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,25],"page-size":e.currentPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"用户信息修改",visible:e.editFormVisible},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{"label-width":"150px",model:e.editForm,rules:e.editRules}},[a("el-form-item",{attrs:{label:"登录名",prop:"account"}},[a("el-input",{staticStyle:{"max-width":"300px"},attrs:{"auto-complete":"off"},model:{value:e.editForm.account,callback:function(t){e.$set(e.editForm,"account",t)},expression:"editForm.account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"nickName"}},[a("el-input",{staticStyle:{"max-width":"300px"},attrs:{"auto-complete":"off"},model:{value:e.editForm.nickName,callback:function(t){e.$set(e.editForm,"nickName",t)},expression:"editForm.nickName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账户类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择用户类型"},model:{value:e.editForm.type,callback:function(t){e.$set(e.editForm,"type",t)},expression:"editForm.type"}},e._l(e.editForm.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.EditUser("editForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var N=a("VU/8")(B,H,!1,function(e){a("iG5c")},"data-v-5b4ba5c1",null).exports,I={name:"HrmUserEdit",data:function(){return{userForm:{account:"",nickName:"",type:"",password:""},userFormRules:{account:[{required:!0,message:"请输入登录名",trigger:"blur"}],nickName:[{required:!0,message:"请输入用户名",trigger:"blur"}],type:[{required:!0,message:"请选择账户类型",trigger:"change"}],password:[{required:!0,message:"请输入登陆密码",trigger:"blur"}]}}},methods:{CreateUserClick:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a;(a=t.userForm,a={account:a.account,password:_()(a.password),nickName:a.nickName,type:a.type},v({method:"post",url:"/api/user",data:a})).then(function(e){"ok"==e.status?t.$message({message:"创建成功",type:"success"}):t.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})})}}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"userForm",staticStyle:{width:"400px"},attrs:{model:e.userForm,rules:e.userFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"登录名",prop:"account"}},[a("el-input",{model:{value:e.userForm.account,callback:function(t){e.$set(e.userForm,"account",t)},expression:"userForm.account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"nickName"}},[a("el-input",{model:{value:e.userForm.nickName,callback:function(t){e.$set(e.userForm,"nickName",t)},expression:"userForm.nickName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账户类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.userForm.type,callback:function(t){e.$set(e.userForm,"type",t)},expression:"userForm.type"}},[a("el-option",{attrs:{label:"管理员",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"普通用户",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.CreateUserClick("userForm")}}},[e._v("立即创建")])],1)],1)],1)},staticRenderFns:[]};var O=a("VU/8")(I,j,!1,function(e){a("AmIl")},"data-v-d8b73662",null).exports;var M={name:"HrmDepartment",data:function(){return{isAdmin:!1,searchForm:{text:""},isSearch:!1,tableData:null,multipleSelection:[],totalPage:0,currentPage:1,currentPageSize:5,deleteButtonDisable:!0,editFormVisible:!1,editForm:{name:"",detail:""},editRules:{name:[{required:!0,message:"请输入部门名称",trigger:"blur"}],detail:[{required:!0,message:"请输入部门详情",trigger:"blur"}]}}},methods:{UpdateTableData:function(){var e,t=this,a=void 0;a=t.isSearch?{offset:this.currentPageSize*(this.currentPage-1),limit:this.currentPageSize,searchText:this.searchForm.text}:{offset:this.currentPageSize*(this.currentPage-1),limit:this.currentPageSize},(e=a,v({method:"get",url:"/api/department",params:{offset:e.offset,limit:e.limit,searchText:e.searchText}})).then(function(e){"ok"==e.status?e.data.datas.length?(t.tableData=e.data.datas,t.totalPage=e.data.total):t.$message({message:"暂无匹配数据",type:"info"}):t.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})},handleEdit:function(e,t){this.editForm=t,this.editFormVisible=!0},handleSizeChange:function(e){this.currentPageSize=e,this.currentPage=1,this.UpdateTableData()},handleCurrentChange:function(e){this.currentPage=e,this.UpdateTableData()},handleSelectionChange:function(e){this.multipleSelection=e,0==this.multipleSelection.length?this.deleteButtonDisable=!0:this.deleteButtonDisable=!1},SearchButtonClick:function(){this.searchForm.text?(this.isSearch=!0,this.currentPage=1,this.UpdateTableData()):(this.isSearch=!1,this.currentPage=1,this.UpdateTableData())},EditUser:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.editForm,a={name:a.name,detail:a.detail,id:a.id},v({method:"put",url:"/api/department",data:a})).then(function(e){"ok"==e.status?(t.$message({message:"修改成功",type:"success"}),t.UpdateTableData(),t.editFormVisible=!1):t.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})})},DeleteUserClick:function(){for(var e=this,t=new Array,a=0;a<this.multipleSelection.length;a++)t[a]=this.multipleSelection[a].id;e.$alert("是否删除选中的条目","删除提示",{confirmButtonText:"确定",callback:function(a){var r;"confirm"==a&&(r=t,v({method:"delete",url:"/api/department",data:r})).then(function(t){"ok"==t.status?(e.$message({message:"删除成功",type:"success"}),e.UpdateTableData()):e.$message({message:t.data,type:"error"})}).catch(function(e){console.log(e)})}})}},mounted:function(){this.UpdateTableData()},updated:function(){this.isAdmin=this.$store.state.isAdmin}},Q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"搜索内容"}},[a("el-input",{attrs:{placeholder:"请输入搜索内容"},model:{value:e.searchForm.text,callback:function(t){e.$set(e.searchForm,"text",t)},expression:"searchForm.text"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.SearchButtonClick}},[e._v("搜索")]),e._v(" "),e.isAdmin?a("el-button",{attrs:{type:"danger",disabled:e.deleteButtonDisable},on:{click:function(t){return e.DeleteUserClick()}}},[e._v("删除选中项")]):e._e()],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"300px"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"ID",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"部门名称",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"部门详情",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.detail))])]}}])}),e._v(" "),e.isAdmin?a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")])]}}],null,!1,4140675729)}):e._e()],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:20}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,25],"page-size":e.currentPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"部门信息修改",visible:e.editFormVisible},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{"label-width":"150px",model:e.editForm,rules:e.editRules}},[a("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[a("el-input",{staticStyle:{"max-width":"300px"},attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门详情",prop:"detail"}},[a("el-input",{staticStyle:{"max-width":"300px"},attrs:{"auto-complete":"off"},model:{value:e.editForm.detail,callback:function(t){e.$set(e.editForm,"detail",t)},expression:"editForm.detail"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.EditUser("editForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var G=a("VU/8")(M,Q,!1,function(e){a("OrhB")},"data-v-4f37a1b3",null).exports,X={name:"HrmDepartmentEdit",data:function(){return{createForm:{departmentName:"",departmentDetail:""},createFormRules:{departmentName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],departmentDetail:[{required:!0,message:"请输入部门详情",trigger:"blur"}]}}},methods:{CreatUser:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a,r={name:t.createForm.departmentName,detail:t.createForm.departmentDetail};(a=r,v({method:"post",url:"/api/department",data:a})).then(function(e){"ok"==e.status?t.$message({message:"创建成功",type:"success"}):t.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})})}}},W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"createForm",staticStyle:{width:"400px"},attrs:{model:e.createForm,rules:e.createFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"部门名称",prop:"departmentName"}},[a("el-input",{model:{value:e.createForm.departmentName,callback:function(t){e.$set(e.createForm,"departmentName",t)},expression:"createForm.departmentName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门详情",prop:"departmentDetail"}},[a("el-input",{model:{value:e.createForm.departmentDetail,callback:function(t){e.$set(e.createForm,"departmentDetail",t)},expression:"createForm.departmentDetail"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.CreatUser("createForm")}}},[e._v("立即创建")])],1)],1)],1)},staticRenderFns:[]};var Z=a("VU/8")(X,W,!1,function(e){a("y4+g")},"data-v-5fd3b036",null).exports;var J={name:"HrmPosition",data:function(){return{isAdmin:!1,searchForm:{text:""},isSearch:!1,tableData:null,multipleSelection:[],totalPage:0,currentPage:1,currentPageSize:5,deleteButtonDisable:!0,editFormVisible:!1,editForm:{name:"",detail:""},editRules:{name:[{required:!0,message:"请输入职位名称",trigger:"blur"}],detail:[{required:!0,message:"请输入职位详情",trigger:"blur"}]}}},methods:{UpdateTableData:function(){var e,t=this,a=void 0;console.log(this.isSearch),t.isSearch?(a={offset:this.currentPageSize*(this.currentPage-1),limit:this.currentPageSize,searchText:this.searchForm.text},console.log(this.searchForm.text)):a={offset:this.currentPageSize*(this.currentPage-1),limit:this.currentPageSize},(e=a,v({method:"get",url:"/api/position",params:{offset:e.offset,limit:e.limit,searchText:e.searchText}})).then(function(e){"ok"==e.status?e.data.datas.length?(t.tableData=e.data.datas,t.totalPage=e.data.total):t.$message({message:"暂无匹配数据",type:"info"}):t.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})},handleEdit:function(e,t){this.editForm=t,this.editFormVisible=!0},handleSizeChange:function(e){this.currentPageSize=e,this.currentPage=1,this.UpdateTableData()},handleCurrentChange:function(e){this.currentPage=e,this.UpdateTableData()},handleSelectionChange:function(e){this.multipleSelection=e,0==this.multipleSelection.length?this.deleteButtonDisable=!0:this.deleteButtonDisable=!1},SearchButtonClick:function(){this.searchForm.text?(this.isSearch=!0,this.currentPage=1,console.log(this.searchForm.text),this.UpdateTableData()):(this.isSearch=!1,this.currentPage=1,this.UpdateTableData())},EditUser:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.editForm,a={name:a.name,detail:a.detail,id:a.id},v({method:"put",url:"/api/position",data:a})).then(function(e){"ok"==e.status?(t.$message({message:"修改成功",type:"success"}),t.UpdateTableData(),t.editFormVisible=!1):t.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})})},DeleteUserClick:function(){for(var e=this,t=new Array,a=0;a<this.multipleSelection.length;a++)t[a]=this.multipleSelection[a].id;e.$alert("是否删除选中的条目","删除提示",{confirmButtonText:"确定",callback:function(a){var r;"confirm"==a&&(r=t,v({method:"delete",url:"/api/position",data:r})).then(function(t){"ok"==t.status?(e.$message({message:"删除成功",type:"success"}),e.UpdateTableData()):e.$message({message:t.data,type:"error"})}).catch(function(e){console.log(e)})}})}},mounted:function(){this.UpdateTableData()},updated:function(){this.isAdmin=this.$store.state.isAdmin}},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"搜索内容"}},[a("el-input",{attrs:{placeholder:"请输入搜索内容"},model:{value:e.searchForm.text,callback:function(t){e.$set(e.searchForm,"text",t)},expression:"searchForm.text"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.SearchButtonClick}},[e._v("搜索")]),e._v(" "),e.isAdmin?a("el-button",{attrs:{type:"danger",disabled:e.deleteButtonDisable},on:{click:function(t){return e.DeleteUserClick()}}},[e._v("删除选中项")]):e._e()],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"300px"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"ID",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"部门名称",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"部门详情",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.detail))])]}}])}),e._v(" "),e.isAdmin?a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")])]}}],null,!1,4140675729)}):e._e()],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:20}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,25],"page-size":e.currentPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"部门信息修改",visible:e.editFormVisible},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{"label-width":"150px",model:e.editForm,rules:e.editRules}},[a("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[a("el-input",{staticStyle:{"max-width":"300px"},attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门详情",prop:"detail"}},[a("el-input",{staticStyle:{"max-width":"300px"},attrs:{"auto-complete":"off"},model:{value:e.editForm.detail,callback:function(t){e.$set(e.editForm,"detail",t)},expression:"editForm.detail"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.EditUser("editForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var K=a("VU/8")(J,Y,!1,function(e){a("vmxg")},"data-v-6918a84c",null).exports,ee={name:"HrmPositionEdit",data:function(){return{createForm:{name:"",detail:""},createFormRules:{name:[{required:!0,message:"请输入职位名称",trigger:"blur"}],detail:[{required:!0,message:"请输入职位详情",trigger:"blur"}]}}},methods:{CreatUser:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a,r={name:t.createForm.name,detail:t.createForm.detail};(a=r,v({method:"post",url:"/api/position",data:a})).then(function(e){"ok"==e.status?t.$message({message:"创建成功",type:"success"}):t.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})})}}},te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"createForm",staticStyle:{width:"400px"},attrs:{model:e.createForm,rules:e.createFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"职位名称",prop:"name"}},[a("el-input",{model:{value:e.createForm.name,callback:function(t){e.$set(e.createForm,"name",t)},expression:"createForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"职位详情",prop:"detail"}},[a("el-input",{model:{value:e.createForm.detail,callback:function(t){e.$set(e.createForm,"detail",t)},expression:"createForm.detail"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.CreatUser("createForm")}}},[e._v("立即创建")])],1)],1)],1)},staticRenderFns:[]};var ae=a("VU/8")(ee,te,!1,function(e){a("lRAQ")},"data-v-caaae3a4",null).exports;var re={name:"HrmStaff",data:function(){return{isAdmin:!1,searchForm:{text:""},isSearch:!1,tableData:null,multipleSelection:[],totalPage:0,currentPage:1,currentPageSize:5,deleteButtonDisable:!0,editFormVisible:!1,positionList:null,departmentList:null,editForm:{id:"",name:"",sex:"",phone:"",mail:"",position:"",academic:"",department:"",address:""},editRules:{id:[{required:!0,message:"请输入员工身份证",trigger:"blur"}],name:[{required:!0,message:"请输入员工名称",trigger:"blur"}],sex:[{required:!0,message:"请输入员工性别",trigger:"change"}],phone:[{required:!0,message:"请输入员工号码",trigger:"blur"}],mail:[{required:!0,message:"请输入员工邮件",trigger:"blur"}],position:[{required:!0,message:"请输入员工职位",trigger:"change"}],academic:[{required:!0,message:"请输入员工学历",trigger:"blur"}],department:[{required:!0,message:"请输入员工部门",trigger:"change"}],address:[{required:!0,message:"请输入员工地址",trigger:"blur"}]}}},methods:{UpdateTableData:function(){var e,t=this,a=void 0;console.log(this.isSearch),t.isSearch?(a={offset:this.currentPageSize*(this.currentPage-1),limit:this.currentPageSize,searchText:this.searchForm.text},console.log(this.searchForm.text)):a={offset:this.currentPageSize*(this.currentPage-1),limit:this.currentPageSize},(e=a,v({method:"get",url:"/api/staff",params:{offset:e.offset,limit:e.limit,searchText:e.searchText}})).then(function(e){"ok"==e.status?(console.log(e),e.data.datas.length?(t.tableData=e.data.datas,t.totalPage=e.data.total):t.$message({message:"暂无匹配数据",type:"info"})):t.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})},handleEdit:function(e,t){this.editForm=t,this.editFormVisible=!0},handleSizeChange:function(e){this.currentPageSize=e,this.currentPage=1,this.UpdateTableData()},handleCurrentChange:function(e){this.currentPage=e,this.UpdateTableData()},handleSelectionChange:function(e){this.multipleSelection=e,0==this.multipleSelection.length?this.deleteButtonDisable=!0:this.deleteButtonDisable=!1},SearchButtonClick:function(){this.searchForm.text?(this.isSearch=!0,this.currentPage=1,console.log(this.searchForm.text),this.UpdateTableData()):(this.isSearch=!1,this.currentPage=1,this.UpdateTableData())},EditUser:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return!1;var r;console.log(t.editForm),(r=a.editForm,v({method:"put",url:"/api/staff",data:r})).then(function(e){"ok"==e.status?(a.$message({message:"修改成功",type:"success"}),a.UpdateTableData(),a.editFormVisible=!1):a.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})})},DeleteUserClick:function(){for(var e=this,t=new Array,a=0;a<this.multipleSelection.length;a++)t[a]=this.multipleSelection[a].id;e.$alert("是否删除选中的条目","删除提示",{confirmButtonText:"确定",callback:function(a){var r;"confirm"==a&&(r=t,v({method:"delete",url:"/api/staff",data:r})).then(function(t){"ok"==t.status?(e.$message({message:"删除成功",type:"success"}),e.UpdateTableData()):e.$message({message:t.data,type:"error"})}).catch(function(e){console.log(e)})}})}},mounted:function(){var e=this;this.UpdateTableData(),c()({methods:"get",url:"http://127.0.0.1:2333/api/getlist"}).then(function(t){console.log(t.data.data),e.positionList=t.data.data.position,e.departmentList=t.data.data.department}).catch(function(e){console.log(e)})},updated:function(){this.isAdmin=this.$store.state.isAdmin}},ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"搜索内容"}},[a("el-input",{attrs:{placeholder:"请输入搜索内容"},model:{value:e.searchForm.text,callback:function(t){e.$set(e.searchForm,"text",t)},expression:"searchForm.text"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.SearchButtonClick}},[e._v("搜索")]),e._v(" "),e.isAdmin?a("el-button",{attrs:{type:"danger",disabled:e.deleteButtonDisable},on:{click:function(t){return e.DeleteUserClick()}}},[e._v("删除选中项")]):e._e()],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"300px"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"性别",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sex?a("span",[e._v("男")]):a("span",[e._v("女")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"手机号码",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.phone))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"邮箱",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.mail))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"职位",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.positionList,function(r){return r.id==t.row.position?a("span",[e._v(e._s(r.name))]):e._e()})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"学历",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.academic))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"身份证号码",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"部门",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.departmentList,function(r){return r.id==t.row.department?a("span",[e._v(e._s(r.name))]):e._e()})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"联系地址",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.address))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"建档时间",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",[e._v(e._s(t.row.createDate))])]}}])}),e._v(" "),e.isAdmin?a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")])]}}],null,!1,4140675729)}):e._e()],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:20}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,25],"page-size":e.currentPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"员工信息修改",visible:e.editFormVisible},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{"label-width":"150px",model:e.editForm,rules:e.editRules}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号码",prop:"cardId"}},[a("el-input",{model:{value:e.editForm.cardId,callback:function(t){e.$set(e.editForm,"cardId",t)},expression:"editForm.cardId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.editForm.sex,callback:function(t){e.$set(e.editForm,"sex",t)},expression:"editForm.sex"}},[a("el-option",{attrs:{label:"男",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"女",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"职位",prop:"position"}},[a("el-select",{attrs:{placeholder:"请选择职位"},model:{value:e.editForm.position,callback:function(t){e.$set(e.editForm,"position",t)},expression:"editForm.position"}},e._l(e.positionList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"学历",prop:"academic"}},[a("el-input",{model:{value:e.editForm.academic,callback:function(t){e.$set(e.editForm,"academic",t)},expression:"editForm.academic"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"mail"}},[a("el-input",{model:{value:e.editForm.mail,callback:function(t){e.$set(e.editForm,"mail",t)},expression:"editForm.mail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[a("el-input",{model:{value:e.editForm.phone,callback:function(t){e.$set(e.editForm,"phone",t)},expression:"editForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系地址",prop:"address"}},[a("el-input",{model:{value:e.editForm.address,callback:function(t){e.$set(e.editForm,"address",t)},expression:"editForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属部门",prop:"department"}},[a("el-select",{attrs:{placeholder:"请选择部门"},model:{value:e.editForm.department,callback:function(t){e.$set(e.editForm,"department",t)},expression:"editForm.department"}},e._l(e.departmentList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"邮政编码",prop:"postCode"}},[a("el-input",{model:{value:e.editForm.postCode,callback:function(t){e.$set(e.editForm,"postCode",t)},expression:"editForm.postCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"QQ号码",prop:"qq"}},[a("el-input",{model:{value:e.editForm.qq,callback:function(t){e.$set(e.editForm,"qq",t)},expression:"editForm.qq"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"政治面貌",prop:"party"}},[a("el-input",{model:{value:e.editForm.party,callback:function(t){e.$set(e.editForm,"party",t)},expression:"editForm.party"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出生日期",prop:"birthday"}},[a("el-input",{model:{value:e.editForm.birthday,callback:function(t){e.$set(e.editForm,"birthday",t)},expression:"editForm.birthday"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"民族",prop:"race"}},[a("el-input",{model:{value:e.editForm.race,callback:function(t){e.$set(e.editForm,"race",t)},expression:"editForm.race"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所学专业",prop:"speciality"}},[a("el-input",{model:{value:e.editForm.speciality,callback:function(t){e.$set(e.editForm,"speciality",t)},expression:"editForm.speciality"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"爱好",prop:"hobby"}},[a("el-input",{model:{value:e.editForm.hobby,callback:function(t){e.$set(e.editForm,"hobby",t)},expression:"editForm.hobby"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.EditUser("editForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var se=a("VU/8")(re,ie,!1,function(e){a("HN0y")},"data-v-343dbfa1",null).exports,oe={name:"HrmStaffEdit",data:function(){return{positionList:null,departmentList:null,createForm:{name:"test",sex:"1",phone:"16601169545",mail:"123456789@qq.com",position:"",academic:"本科",department:"",address:"云南省昆明市呈贡区云南大学",postCode:"12345",cardId:"123456789038475612",qq:"483286868",party:"党员",birthday:"19970101",race:"汉",speciality:"软件工程",hobby:"绘画",remark:"备注"},createFormRules:{name:[{required:!0,message:"请输入员工姓名",trigger:"blur"}],sex:[{required:!0,message:"请输入员工性别",trigger:"change"}],phone:[{required:!0,message:"请输入员工手机",trigger:"blur"}],mail:[{required:!0,message:"请输入员工邮件",trigger:"blur"}],position:[{required:!0,message:"请输入员工职位",trigger:"change"}],academic:[{required:!0,message:"请输入员工学历",trigger:"blur"}],department:[{required:!0,message:"请输入员工部门",trigger:"change"}],address:[{required:!0,message:"请输入员工地址",trigger:"blur"}],postCode:[{required:!0,message:"请输入员工邮编",trigger:"blur"}],cardId:[{required:!0,message:"请输入员工身份证",trigger:"blur"}],qq:[{required:!0,message:"请输入员工QQ",trigger:"blur"}],party:[{required:!0,message:"请输入政治面貌",trigger:"blur"}],birthday:[{required:!0,message:"请输入员工生日",trigger:"blur"}],race:[{required:!0,message:"请输入员工民族",trigger:"blur"}],speciality:[{required:!0,message:"请输入特长",trigger:"blur"}],hobby:[{required:!0,message:"请输入兴趣爱好",trigger:"blur"}],remark:[{required:!0,message:"请输入备注",trigger:"blur"}]}}},methods:{CreatUser:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.createForm,v({method:"post",url:"/api/staff",data:a})).then(function(e){"ok"==e.status?t.$message({message:"创建成功",type:"success"}):t.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})})}},mounted:function(){var e=this;c()({methods:"get",url:"http://127.0.0.1:2333/api/getlist"}).then(function(t){console.log(t.data),e.positionList=t.data.data.position,e.departmentList=t.data.data.department}).catch(function(e){console.log(e)})}},ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"createForm",staticStyle:{width:"400px"},attrs:{model:e.createForm,rules:e.createFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.createForm.name,callback:function(t){e.$set(e.createForm,"name",t)},expression:"createForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号码",prop:"cardId"}},[a("el-input",{model:{value:e.createForm.cardId,callback:function(t){e.$set(e.createForm,"cardId",t)},expression:"createForm.cardId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.createForm.sex,callback:function(t){e.$set(e.createForm,"sex",t)},expression:"createForm.sex"}},[a("el-option",{attrs:{label:"男",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"女",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"职位",prop:"position"}},[a("el-select",{attrs:{placeholder:"请选择职位"},model:{value:e.createForm.position,callback:function(t){e.$set(e.createForm,"position",t)},expression:"createForm.position"}},e._l(e.positionList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"学历",prop:"academic"}},[a("el-input",{model:{value:e.createForm.academic,callback:function(t){e.$set(e.createForm,"academic",t)},expression:"createForm.academic"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"mail"}},[a("el-input",{model:{value:e.createForm.mail,callback:function(t){e.$set(e.createForm,"mail",t)},expression:"createForm.mail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[a("el-input",{model:{value:e.createForm.phone,callback:function(t){e.$set(e.createForm,"phone",t)},expression:"createForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系地址",prop:"address"}},[a("el-input",{model:{value:e.createForm.address,callback:function(t){e.$set(e.createForm,"address",t)},expression:"createForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属部门",prop:"department"}},[a("el-select",{attrs:{placeholder:"请选择职位"},model:{value:e.createForm.department,callback:function(t){e.$set(e.createForm,"department",t)},expression:"createForm.department"}},e._l(e.departmentList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"邮政编码",prop:"postCode"}},[a("el-input",{model:{value:e.createForm.postCode,callback:function(t){e.$set(e.createForm,"postCode",t)},expression:"createForm.postCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"QQ号码",prop:"qq"}},[a("el-input",{model:{value:e.createForm.qq,callback:function(t){e.$set(e.createForm,"qq",t)},expression:"createForm.qq"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"政治面貌",prop:"party"}},[a("el-input",{model:{value:e.createForm.party,callback:function(t){e.$set(e.createForm,"party",t)},expression:"createForm.party"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出生日期",prop:"birthday"}},[a("el-input",{model:{value:e.createForm.birthday,callback:function(t){e.$set(e.createForm,"birthday",t)},expression:"createForm.birthday"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"民族",prop:"race"}},[a("el-input",{model:{value:e.createForm.race,callback:function(t){e.$set(e.createForm,"race",t)},expression:"createForm.race"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所学专业",prop:"speciality"}},[a("el-input",{model:{value:e.createForm.speciality,callback:function(t){e.$set(e.createForm,"speciality",t)},expression:"createForm.speciality"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"爱好",prop:"hobby"}},[a("el-input",{model:{value:e.createForm.hobby,callback:function(t){e.$set(e.createForm,"hobby",t)},expression:"createForm.hobby"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{model:{value:e.createForm.remark,callback:function(t){e.$set(e.createForm,"remark",t)},expression:"createForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.CreatUser("createForm")}}},[e._v("立即创建")])],1)],1)],1)},staticRenderFns:[]};var le=a("VU/8")(oe,ne,!1,function(e){a("+FfD")},"data-v-51263a3b",null).exports;var ce={name:"HrmBulletin",data:function(){return{isAdmin:!1,searchForm:{text:""},isSearch:!1,tableData:null,multipleSelection:[],totalPage:0,currentPage:1,currentPageSize:5,deleteButtonDisable:!0,editFormVisible:!1,editForm:{title:"",content:""},editRules:{title:[{required:!0,message:"请输入公告名称",trigger:"blur"}],content:[{required:!0,message:"请输入公告内容",trigger:"blur"}]}}},methods:{UpdateTableData:function(){var e,t=this,a=void 0;console.log(this.isSearch),t.isSearch?(a={offset:this.currentPageSize*(this.currentPage-1),limit:this.currentPageSize,searchText:this.searchForm.text},console.log(this.searchForm.text)):a={offset:this.currentPageSize*(this.currentPage-1),limit:this.currentPageSize},(e=a,v({method:"get",url:"/api/bulletin",params:{offset:e.offset,limit:e.limit,searchText:e.searchText}})).then(function(e){"ok"==e.status?e.data.datas.length?(t.tableData=e.data.datas,t.totalPage=e.data.total):t.$message({message:"暂无匹配数据",type:"info"}):t.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})},handleEdit:function(e,t){this.editForm=t,this.editFormVisible=!0},handleSizeChange:function(e){this.currentPageSize=e,this.currentPage=1,this.UpdateTableData()},handleCurrentChange:function(e){this.currentPage=e,this.UpdateTableData()},handleSelectionChange:function(e){this.multipleSelection=e,0==this.multipleSelection.length?this.deleteButtonDisable=!0:this.deleteButtonDisable=!1},SearchButtonClick:function(){this.searchForm.text?(this.isSearch=!0,this.currentPage=1,console.log(this.searchForm.text),this.UpdateTableData()):(this.isSearch=!1,this.currentPage=1,this.UpdateTableData())},EditUser:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.editForm,a={title:a.title,content:a.content,id:a.id},v({method:"put",url:"/api/bulletin",data:a})).then(function(e){"ok"==e.status?(t.$message({message:"修改成功",type:"success"}),t.UpdateTableData(),t.editFormVisible=!1):t.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})})},DeleteUserClick:function(){for(var e=this,t=new Array,a=0;a<this.multipleSelection.length;a++)t[a]=this.multipleSelection[a].id;e.$alert("是否删除选中的条目","删除提示",{confirmButtonText:"确定",callback:function(a){var r;"confirm"==a&&(r=t,v({method:"delete",url:"/api/bulletin",data:r})).then(function(t){"ok"==t.status?(e.$message({message:"删除成功",type:"success"}),e.UpdateTableData()):e.$message({message:t.data,type:"error"})}).catch(function(e){console.log(e)})}})}},mounted:function(){this.UpdateTableData()},updated:function(){this.isAdmin=this.$store.state.isAdmin}},ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"搜索内容"}},[a("el-input",{attrs:{placeholder:"请输入搜索内容"},model:{value:e.searchForm.text,callback:function(t){e.$set(e.searchForm,"text",t)},expression:"searchForm.text"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.SearchButtonClick}},[e._v("搜索")]),e._v(" "),e.isAdmin?a("el-button",{attrs:{type:"danger",disabled:e.deleteButtonDisable},on:{click:function(t){return e.DeleteUserClick()}}},[e._v("删除选中项")]):e._e()],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"300px"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"ID",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"公告标题",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.title))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"公告内容",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.content))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",[e._v(e._s(t.row.createDate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"公告人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.creator))])]}}])}),e._v(" "),e.isAdmin?a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")])]}}],null,!1,4140675729)}):e._e()],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:20}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,25],"page-size":e.currentPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"公告信息修改",visible:e.editFormVisible},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{"label-width":"150px",model:e.editForm,rules:e.editRules}},[a("el-form-item",{attrs:{label:"公告名称",prop:"name"}},[a("el-input",{staticStyle:{"max-width":"300px"},attrs:{"auto-complete":"off"},model:{value:e.editForm.title,callback:function(t){e.$set(e.editForm,"title",t)},expression:"editForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"公告内容",prop:"detail"}},[a("el-input",{staticStyle:{"max-width":"300px"},attrs:{"auto-complete":"off"},model:{value:e.editForm.content,callback:function(t){e.$set(e.editForm,"content",t)},expression:"editForm.content"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.EditUser("editForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var me=a("VU/8")(ce,ue,!1,function(e){a("w2ls")},"data-v-a2f6ea78",null).exports,de={name:"HrmBulletinEdit",data:function(){return{createForm:{title:"",content:""},createFormRules:{title:[{required:!0,message:"请输入公告名称",trigger:"blur"}],content:[{required:!0,message:"请输入公告内容",trigger:"blur"}]}}},methods:{CreatUser:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a,r={title:t.createForm.title,content:t.createForm.content};(a=r,v({method:"post",url:"/api/bulletin",data:a})).then(function(e){"ok"==e.status?t.$message({message:"创建成功",type:"success"}):t.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})})}}},pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"createForm",staticStyle:{width:"400px"},attrs:{model:e.createForm,rules:e.createFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"公告名称",prop:"title"}},[a("el-input",{model:{value:e.createForm.title,callback:function(t){e.$set(e.createForm,"title",t)},expression:"createForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"公告内容",prop:"content"}},[a("el-input",{model:{value:e.createForm.content,callback:function(t){e.$set(e.createForm,"content",t)},expression:"createForm.content"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.CreatUser("createForm")}}},[e._v("立即创建")])],1)],1)],1)},staticRenderFns:[]};var fe=a("VU/8")(de,pe,!1,function(e){a("R2bR")},"data-v-3ed53972",null).exports;var he={name:"HrmFile",data:function(){return{fileList:[],isAdmin:!1,searchForm:{text:""},isSearch:!1,tableData:null,multipleSelection:[],totalPage:0,currentPage:1,currentPageSize:5,deleteButtonDisable:!0,editFormVisible:!1,editForm:{title:"",detail:""},editRules:{title:[{required:!0,message:"请输入公告名称",trigger:"blur"}],detail:[{required:!0,message:"请输入公告内容",trigger:"blur"}]}}},methods:{UpdateTableData:function(){var e,t=this,a=void 0;console.log(this.isSearch),t.isSearch?(a={offset:this.currentPageSize*(this.currentPage-1),limit:this.currentPageSize,searchText:this.searchForm.text},console.log(this.searchForm.text)):a={offset:this.currentPageSize*(this.currentPage-1),limit:this.currentPageSize},(e=a,v({method:"get",url:"/api/file",params:{offset:e.offset,limit:e.limit,searchText:e.searchText}})).then(function(e){console.log(e),"ok"==e.status?e.data.datas.length?(t.tableData=e.data.datas,t.totalPage=e.data.total):t.$message({message:"暂无匹配数据",type:"info"}):t.$message({message:e.data,type:"error"})}).catch(function(e){console.log(e)})},handleRemove:function(e,t){console.log(e,t)},handleSuccess:function(e){"ok"==e.status?(this.$message({message:"修改成功",type:"success"}),this.UpdateTableData(),this.editFormVisible=!1):this.$message({message:e.data,type:"error"})},handleError:function(e){console.log(e)},handlePreview:function(e){console.log(e)},handleDownload:function(e){window.location.href="http://127.0.0.1:2333/"+e.url},handleEdit:function(e,t){this.editForm=t,this.editForm.sessionId=this.$store.state.sessionId,this.editFormVisible=!0},handleSizeChange:function(e){this.currentPageSize=e,this.currentPage=1,this.UpdateTableData()},handleCurrentChange:function(e){this.currentPage=e,this.UpdateTableData()},handleSelectionChange:function(e){this.multipleSelection=e,0==this.multipleSelection.length?this.deleteButtonDisable=!0:this.deleteButtonDisable=!1},SearchButtonClick:function(){this.searchForm.text?(this.isSearch=!0,this.currentPage=1,console.log(this.searchForm.text),this.UpdateTableData()):(this.isSearch=!1,this.currentPage=1,this.UpdateTableData())},EditUser:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$refs.upload.submit()})},DeleteUserClick:function(){for(var e=this,t=new Array,a=0;a<this.multipleSelection.length;a++)t[a]=this.multipleSelection[a].id;e.$alert("是否删除选中的条目","删除提示",{confirmButtonText:"确定",callback:function(a){var r;"confirm"==a&&(r=t,v({method:"delete",url:"/api/file",data:r})).then(function(t){"ok"==t.status?(e.$message({message:"删除成功",type:"success"}),e.UpdateTableData()):e.$message({message:t.data,type:"error"})}).catch(function(e){console.log(e)})}})}},mounted:function(){this.UpdateTableData()},updated:function(){this.isAdmin=this.$store.state.isAdmin}},ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"搜索内容"}},[a("el-input",{attrs:{placeholder:"请输入搜索内容"},model:{value:e.searchForm.text,callback:function(t){e.$set(e.searchForm,"text",t)},expression:"searchForm.text"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.SearchButtonClick}},[e._v("搜索")]),e._v(" "),e.isAdmin?a("el-button",{attrs:{type:"danger",disabled:e.deleteButtonDisable},on:{click:function(t){return e.DeleteUserClick()}}},[e._v("删除选中项")]):e._e()],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"300px"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"ID",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"文件标题",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.title))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"文件详情",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.detail))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",[e._v(e._s(t.row.createDate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.creator))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isAdmin?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleDownload(t.row)}}},[e._v("下载")])]}}])})],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:20}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,25],"page-size":e.currentPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"文件信息修改",visible:e.editFormVisible},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{"label-width":"150px",model:e.editForm,rules:e.editRules}},[a("el-form-item",{attrs:{label:"文件名称",prop:"name"}},[a("el-input",{staticStyle:{"max-width":"300px"},attrs:{"auto-complete":"off"},model:{value:e.editForm.title,callback:function(t){e.$set(e.editForm,"title",t)},expression:"editForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文件详情",prop:"detail"}},[a("el-input",{staticStyle:{"max-width":"300px"},attrs:{"auto-complete":"off"},model:{value:e.editForm.detail,callback:function(t){e.$set(e.editForm,"detail",t)},expression:"editForm.detail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选取文件"}},[a("el-upload",{ref:"upload",staticStyle:{"margin-bottom":"10px"},attrs:{limit:1,action:"http://127.0.0.1:2333/api/file/",data:e.editForm,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-error":e.handleError,"on-success":e.handleSuccess,"file-list":e.fileList,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.EditUser("editForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var be=a("VU/8")(he,ge,!1,function(e){a("k4QS")},"data-v-73212b54",null).exports,ve={name:"HrmFileEdit",data:function(){return{createForm:{title:"",detail:"",sessionId:this.$store.state.sessionId},createFormRules:{title:[{required:!0,message:"请输入文件名称",trigger:"blur"}],detail:[{required:!0,message:"请输入文件描述",trigger:"blur"}]},fileList:[]}},methods:{handleRemove:function(e,t){console.log(e,t)},handleSuccess:function(e){"ok"==e.status?this.$message({message:"创建成功",type:"success"}):this.$message({message:e.data,type:"error"})},handleError:function(e){console.log(e)},handlePreview:function(e){console.log(e)},CreatUser:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$refs.upload.submit()})}}},Fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"createForm",staticStyle:{width:"400px"},attrs:{model:e.createForm,rules:e.createFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"文件名称",prop:"title"}},[a("el-input",{model:{value:e.createForm.title,callback:function(t){e.$set(e.createForm,"title",t)},expression:"createForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文件描述",prop:"detail"}},[a("el-input",{model:{value:e.createForm.detail,callback:function(t){e.$set(e.createForm,"detail",t)},expression:"createForm.detail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选取文件"}},[a("el-upload",{ref:"upload",staticStyle:{"margin-bottom":"10px"},attrs:{limit:1,action:"http://127.0.0.1:2333/api/file/",data:e.createForm,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-error":e.handleError,"on-success":e.handleSuccess,"file-list":e.fileList,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.CreatUser("createForm")}}},[e._v("立即创建")])],1)],1)],1)},staticRenderFns:[]};var _e=a("VU/8")(ve,Fe,!1,function(e){a("UPuL")},"data-v-0574b616",null).exports,ye={name:"FileTest",data:function(){return{file:""}},methods:{getFile:function(e){this.file=e.target.files[0],console.log(this.file)},submit:function(e){e.preventDefault();var t=new FormData;t.append("file",this.file),c.a.post("http://127.0.0.1:2333/api/upload",t).then(function(e){console.log(e)}).catch(function(e){console.log(e)})}}},ke={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{attrs:{enctype:"multipart/form-data"}},[a("input",{attrs:{type:"file"},on:{change:function(t){return e.getFile(t)}}}),e._v(" "),a("button",{staticClass:"button button-primary button-pill button-small",on:{click:function(t){return e.submit(t)}}},[e._v("提交")])])},staticRenderFns:[]};var xe=a("VU/8")(ye,ke,!1,function(e){a("Z/o+")},"data-v-e9d3c7b0",null).exports;r.default.use(z.a);var we=new z.a({mode:"history",routes:[{path:"/login",name:"HrmLogin",component:V},{path:"/register",name:"HrmRegister",component:L},{path:"/user",name:"HrmUser",component:N},{path:"/useredit",name:"HrmUserEdit",component:O},{path:"/department",name:"HrmDepartment",component:G},{path:"/departmentedit",name:"HrmDepartmentEdit",component:Z},{path:"/position",name:"HrmPosition",component:K},{path:"/positionedit",name:"HrmPositionEdit",component:ae},{path:"/staff",name:"HrmStaff",component:se},{path:"/staffedit",name:"HrmStaff",component:le},{path:"/bulletin",name:"HrmBulletin",component:me},{path:"/bulletinedit",name:"HrmBulletinEdit",component:fe},{path:"/file",name:"HrmFile",component:be},{path:"/fileedit",name:"HrmFileEdit",component:_e},{path:"/filetest",name:"FileTest",component:xe}]});r.default.use(s.a),r.default.config.productionTip=!1,new r.default({el:"#app",router:we,store:g,components:{App:T},template:"<App/>"})},OrhB:function(e,t){},R2bR:function(e,t){},Rtck:function(e,t){},UPuL:function(e,t){},"Z/o+":function(e,t){},iG5c:function(e,t){},k4QS:function(e,t){},lRAQ:function(e,t){},niX4:function(e,t){},tvR6:function(e,t){},vmxg:function(e,t){},w2ls:function(e,t){},"y4+g":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.b087530579e43ecb3147.js.map